"use strict";
/*
 * Copyright (c) 2019, salesforce.com, inc.
 * All rights reserved.
 * SPDX-License-Identifier: MIT
 * For full license text, see the LICENSE file in the repo root or https://opensource.org/licenses/MIT
 */
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.loadDbFromConfig = void 0;
const path_1 = __importDefault(require("path"));
const utils_1 = require("@best/utils");
const LOCAL_ADAPTERS = ['sql/postgres', 'sql/sqlite', 'rest/frontend'];
const loadDbFromConfig = (globalConfig) => {
    const config = globalConfig.apiDatabase;
    if (LOCAL_ADAPTERS.includes(config.adapter)) {
        const localAdapter = (0, utils_1.req)(path_1.default.resolve(__dirname, config.adapter));
        return new localAdapter(config);
    }
    else {
        const remoteAdapter = (0, utils_1.req)(config.adapter);
        return new remoteAdapter(config);
    }
};
exports.loadDbFromConfig = loadDbFromConfig;
//# sourceMappingURL=utils.js.map